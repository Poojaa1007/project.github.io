<!DOCTYPE html>
<html>
<head>
    <title>Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet.heat/dist/leaflet-heat.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<canvas id="particles"></canvas>
<div class="navbar">
    <h2>ğŸ›¡ SafeGuard AI</h2>
    <div class="nav-links">
        <a href="profile.html">Profile</a>
        <a href="history.html">History</a>
        <a href="index.html">Logout</a>
    </div>
</div>

<div class="dashboard">
    <h2>Welcome, {{ username }}</h2>
    <div id="map" style="height:400px; margin:20px 0;"></div>

    <div class="grid">

        <div class="card" style="text-align:center;">
            <h3>Emergency SOS</h3>
            <button class="sos-btn" onclick="alert('SOS Triggered!')">
                ğŸš¨ SOS
            </button>
        </div>
        <div class="card">

    <h3>ğŸ§  AI Safety Intelligence Panel</h3>

    <!-- Risk Score -->
    <div class="risk-container">
        <h2>Risk Score</h2>
        <div class="risk-circle">
            <span id="riskValue">35</span>
        </div>
        <p id="riskLabel">Low Risk</p>
    </div>

    <!-- Sensors -->
    <div class="sensor-grid">

        <div class="sensor">
            <i class="fas fa-heart pulse"></i>
            <h3>Heart Rate</h3>
            <h2 id="heart">92 bpm</h2>
        </div>

        <div class="sensor">
            <i class="fas fa-brain"></i>
            <h3>Stress</h3>
            <h2 id="stress">40%</h2>
        </div>

        <div class="sensor">
            <i class="fas fa-person-falling"></i>
            <h3>Fall Detection</h3>
            <h2 id="fall">Normal</h2>
        </div>

    </div>
    <div style="margin-top:25px; text-align:center;">
        <h3>ğŸ™ Voice Distress Detection</h3>
        <button onclick="startVoiceDetection()" class="sos-btn">
            ğŸ¤ Start Listening
        </button>
        <p id="voiceStatus" style="margin-top:10px; font-weight:bold;"></p>
    </div>
    <div style="margin-top:30px;">
        <h3>ğŸ“Š AI Risk Trend</h3>
        <canvas id="riskChart" height="100"></canvas>
    </div>

</div>
<!-- Emergency Modal -->
<div id="emergencyModal" class="modal">
    <div class="modal-content">
        <h2>ğŸš¨ Emergency Alert Triggered</h2>
        <p>AI detected high-risk situation.</p>
        <p>ğŸ“ Location shared with guardian.</p>
        <p>ğŸ“¡ Emergency services notified.</p>
        <button onclick="closeModal()">Close</button>
    </div>
</div>
<script src="{{ url_for('static', filename='js/script.js') }}"></script>
<footer class="footer">
    <p>Â© 2026 SafeGuard AI | Built for Women Safety Innovation Expo</p>
    <div>
        <a href="{{ url_for('home') }}">Home</a> |
        <a href="{{ url_for('dashboard') }}">Dashboard</a> |
        <a href="{{ url_for('logout') }}">Logout</a>
    </div>
</footer>
</body>
</html>